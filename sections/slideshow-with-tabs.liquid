{{ 'slideshow-with-tabs.css' | asset_url | stylesheet_tag }}
{{ 'component-slider.css' | asset_url | stylesheet_tag }}
{{ 'section-image-banner.css' | asset_url | stylesheet_tag }}
{{ 'component-slideshow.css' | asset_url | stylesheet_tag }}
{%- if section.settings.slide_height == 'adapt_image' and section.blocks.first.settings.image != blank -%}
  {%- style -%}
      @media screen and (max-width: 749px) {
        #Slider-{{ section.id }}::before,
        #Slider-{{ section.id }} .media::before,
        #Slider-{{ section.id }}:not(.banner--mobile-bottom) .banner__content::before {
          padding-bottom: {{ 1 | divided_by: section.blocks.first.settings.image.aspect_ratio | times: 100 }}%;
          content: '';
          display: block;
        }
      }
  
      @media screen and (min-width: 750px) {
        #Slider-{{ section.id }}::before,
        #Slider-{{ section.id }} .media::before {
          padding-bottom: {{ 1 | divided_by: section.blocks.first.settings.image.aspect_ratio | times: 100 }}%;
          content: '';
          display: block;
        }
      }
         {%- for block in section.blocks -%}
            #Slide-{{ section.id }}-{{ forloop.index }} .banner__media::after {
              opacity: {{ block.settings.image_overlay_opacity | divided_by: 100.0 }};
            }
        {%  endfor %}
  {%- endstyle -%}
{%- endif -%}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.50 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.50 | round: 0 }}px;
  }

  @media screen and (min-width: 1540px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
  
  .slideshowtabs-section{ position: relative; }
  .swiper-slide { background-size: cover; background-position: center; }
  .slideshowtabs-section .swiper-tabs .swiper-slide.swiper-slide-thumb-active:after{ animation: timing-line {{ section.settings.auto_play }}s linear; }
  .gallery-thumbs-{{ section.id }} .swiper-slide { opacity: 1; }
  .gallery-thumbs-{{ section.id }} .swiper-slide.swiper-slide-thumb-active { opacity: 1; }
  .slideshow:not(.banner--mobile-bottom) .slideshow__text-wrapper{ height: 100%; }
{%- endstyle -%}
{%- liquid
     assign sizes = '100vw'
    assign widths = '550, 750, 1100, 1500, 1780, 2000, 3000, 3840'       
   assign fetch_priority = "auto"
%}
<div class="slideshow-tab-section color-{{ section.settings.color_scheme }} gradient {{ section.settings.custom_class_name }}">
  <div class="slideshowtabs-section {% if section.settings.content_reverse %} content-reverse {% endif %} {% if section.settings.page_full_width %} page-full-width {% else %} page-width {% endif %} {% if section.settings.page_full_width_spacing %} page-full-width_spacing {% endif %} section-{{ section.id }}-padding isolate {% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
    {% if settings.animations_reveal_on_scroll %}
              data-cascade style="--animation-order: {{ forloop.index }};"
            {% endif %}>
    <div class="swiper-button-next  tabs-next-dt {{ section.id }}">
               <span><svg xmlns="http://www.w3.org/2000/svg" width="27" height="16" viewBox="0 0 27 16" fill="none">
                <path d="M22.64 5.68003L25.5 7.98072L22.64 10.28" stroke="black" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M25.3879 8.14001L1.56788 8.14001" stroke="black" stroke-linecap="round" stroke-linejoin="round"/>
                </svg></span>
                 
             </div>
  <div class="swiper swiper-container gallery-top-{{ section.id }}  main-swiper-slide product-image-section">
    <div
      class="swiper-wrapper  {% if section.settings.show_text_below %} banner--mobile-bottom{% endif %}{% if section.blocks.first.settings.image == blank %} slideshow--placeholder{% endif %}"
      id="Slider-{{ section.id }}"
    >
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'slide' -%}
            <div class="swiper-slide {{ block.type }} banner  banner--{{ section.settings.slide_height }}" id="Slide-{{ section.id }}-{{ forloop.index }}" {{ block.shopify_attributes }} role="group" aria-roledescription="{{ 'sections.slideshow.slide' | t }}" aria-label="{{ forloop.index }} {{ 'general.slider.of' | t }} {{ forloop.length }}" tabindex="-1" >
              <div class="slideshow__media banner__media media {% if block.settings.image == blank %} placeholder{% endif %}">
                {%- if block.settings.image -%}
                 {{
                  block.settings.image
                  | image_url: width: 2040
                  | image_tag: sizes: sizes, widths: widths, fetchpriority: fetch_priority, loading: 'lazy', class: 'desktop-slider'
                }}
                {%- else -%}
                  {{ 'hero-apparel-2' | placeholder_svg_tag: 'placeholder-svg' }}
                {%- endif -%}
              </div>
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>
  <div class="page-width product-thump-section">
    <div class=" title-wrapper-with-link">
        {%- if section.settings.sub_heading != blank -%}
          <h6 class="sub-heading">{{ section.settings.sub_heading }}</h6>
        {%- endif -%}
        {%- if section.settings.title != blank -%}
          <h2 class="tab__heading h2">{{ section.settings.title }}</h2>
        {%- endif -%}
    </div>
    <div class="swiper swiper-container gallery-thumbs-{{ section.id }} swiper-horizontal swiper-tabs" id="gallery-thumbs-{{ section.id }}">
          <div class="swiper-wrapper">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'slide' -%}
            <div class="swiper-slide">
              
           
              <div class="product__media-wrapper">
                  {%- assign product = block.settings.product -%}                
                  {% render 'card-product',
                          card_product: product,
                          media_aspect_ratio: 'adapt',
                          show_secondary_image: section.settings.show_secondary_image,
                          show_vendor: section.settings.show_vendor,
                          show_quick_add: true,
                          show_new_tag: section.settings.show_new_tag,
                          show_secondary_image: true,
                          section_id: section.id,
                          show_vendor: section.settings.show_vendor,
                          from: 'gallery-thumbs-ctrls'    
                  %}
                </div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>    
      <div class="swiper-pagination tabs-pagination {{ section.id }}"></div>
    </div>
    <div class="product-thump-swiper-button">
        <div class="swiper-button-prev tabs-prev-dt {{ section.id }}">
                  <span><svg xmlns="http://www.w3.org/2000/svg" width="27" height="16" viewBox="0 0 27 16" fill="none">
                    <path d="M4.31117 10.32L1.45117 8.01928L4.31117 5.71997" stroke="black" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M1.56329 7.85999L25.3833 7.85999" stroke="black" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg></span>
       </div>
        <div class="swiper-button-next  tabs-next-dt {{ section.id }}">
         <span><svg xmlns="http://www.w3.org/2000/svg" width="27" height="16" viewBox="0 0 27 16" fill="none">
          <path d="M22.64 5.68003L25.5 7.98072L22.64 10.28" stroke="black" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M25.3879 8.14001L1.56788 8.14001" stroke="black" stroke-linecap="round" stroke-linejoin="round"/>
          </svg></span>
           
       </div>
    </div>
  </div>
 <div class="swiper-button-prev tabs-prev-dt {{ section.id }}">
              <span><svg xmlns="http://www.w3.org/2000/svg" width="27" height="16" viewBox="0 0 27 16" fill="none">
                <path d="M4.31117 10.32L1.45117 8.01928L4.31117 5.71997" stroke="black" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M1.56329 7.85999L25.3833 7.85999" stroke="black" stroke-linecap="round" stroke-linejoin="round"/>
              </svg></span>
  </div>
                  
</div>
</div>

<script>

      let autoplay = false;
  const delayVal = parseInt({{ section.settings.auto_play }});
  
    if (delayVal > 0) {
      autoplay = {
        delay: delayVal * 1000,
      };
    }

  
  var galleryThumbs = new Swiper(".gallery-thumbs-{{ section.id }}", {
     loop: true,
     spaceBetween: 10,
      effect: "fade",
    fadeEffect: {
      crossFade: true
    },
     slidesPerView: 1,     
     slideToClickedSlide: true,
    navigation: {
        nextEl: (".tabs-next-dt.{{ section.id }}"),
        prevEl: (".tabs-prev-dt.{{ section.id }}")
    }     
   });
   var galleryTop = new Swiper(".gallery-top-{{ section.id }}", {
     loop: true,
     spaceBetween: 0,
     grabCursor: true,
     autoplay    
   });
    galleryTop.controller.control = galleryThumbs;
    galleryThumbs.controller.control = galleryTop;
 
</script>
{% schema %}
{
  "name": "t:sections.slideshow-with-tabs.name",
  "tag": "section",
  "class": "section slideshow-with-tabs",

  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type":"checkbox",
      "id":"page_full_width",
       "default": true,
      "label": "t:sections.all.page_full_width.label"
    },
    {
      "type":"checkbox",
      "id":"page_full_width_spacing",
       "default": false,
      "label": "t:sections.all.page_full_width_spacing.label"
    },
    {
      "type": "text",
      "id": "sub_heading",
      "default":"Sub Heading",
      "label": "t:sections.all.sub_heading.label"
    },
    {
        "type": "text",
        "id": "title",
        "default": "Heading",
        "label": "t:sections.all.title.label"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "background-1",
          "label": "t:sections.all.colors.background_1.label"
        },
        {
          "value": "background-2",
          "label": "t:sections.all.colors.background_2.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        }
      ],
      "default": "background-1",
      "label": "t:sections.all.colors.label"
    },
    {
      "type": "select",
      "id": "slide_height",
      "options": [
        {
          "value": "adapt_image",
          "label": "t:sections.slideshow-with-tabs.settings.slide_height.options__1.label"
        },
        {
          "value": "small",
          "label": "t:sections.slideshow-with-tabs.settings.slide_height.options__2.label"
        },
        {
          "value": "medium",
          "label": "t:sections.slideshow-with-tabs.settings.slide_height.options__3.label"
        },
        {
          "value": "large",
          "label": "t:sections.slideshow-with-tabs.settings.slide_height.options__4.label"
        }
      ],
      "default": "medium",
      "label": "t:sections.slideshow-with-tabs.settings.slide_height.label"
    },
    {
      "type": "range",
      "id": "auto_play",
      "min": 0,
      "max": 5,
      "unit": "s",
      "step": 1,
      "label": "t:sections.all.swiper.auto_play",
      "default": 0
    },
    {
      "type": "checkbox",
      "id": "content_reverse",
      "default": false,
      "label": "t:sections.slideshow-with-tabs.settings.content_reverse.label"
    },
    {
      "type": "header",
      "content": "t:sections.featured-collection.settings.header.content"
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "default": true,
      "label": "t:sections.featured-collection.settings.show_vendor.label"
    },
    {
      "type": "checkbox",
      "id": "show_new_tag",
      "default": false,
      "label": "t:sections.featured-collection.settings.show_new_tag.label"
    },
    {
    "type": "header",
    "content": "t:sections.all.custom_class_heading.content"
    },
    {
    "type": "text",
    "id": "custom_class_name",
    "label": "t:sections.all.custom_class_name.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },{
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 140,
      "step": 5,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 45
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 140,
      "step": 5,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 45
    }
  ],
  "blocks": [
        {
      "type": "slide",
      "name": "t:sections.slideshow-with-tabs.blocks.slide.name",
      "limit": 5,
      "settings": [
         {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.slideshow-with-tabs.blocks.slide.settings.image.label"
        },
        {
          "type": "product",
          "id": "product",
          "label": "t:sections.slideshow-with-tabs.blocks.slide.settings.product.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.slideshow-with-tabs.presets.name",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}
